/* MarcDialogs.js v20170621 - Marc Robledo 2014-2017 - http://www.marcrobledo.com/license */
MarcDialogs=function(){function e(e,t,n){r?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}function t(){v--,d()}function n(){v++,d()}function a(){v>=0&&(u?history.go(-1):t())}function o(e){for(var t=0;t<e.dialogElements.length;t++){var n=e.dialogElements[t];if("INPUT"===n.nodeName&&"hidden"!==n.type||"INPUT"!==n.nodeName)return window.setTimeout(function(){n.focus()},1),!0}return!1}function l(e){e.style.marginLeft="-"+parseInt(e.offsetWidth/2)+"px",e.style.marginTop="-"+parseInt(e.offsetHeight/2)-30+"px"}function i(){for(var e=0;document.getElementById("dialog-quick"+e);)-1===y.indexOf(document.getElementById("dialog-quick"+e))&&document.body.removeChild(document.getElementById("dialog-quick"+e)),e++}function c(e,t){for(var n=0;n<e.dialogElements.length;n++)e.dialogElements[n].disabled=t}function d(){if(-1===v){g.className="dialog-overlay";for(e=0;e<y.length;e++)y[e].className=y[e].className.replace(/ active/g,"");window.setTimeout(i,2500)}else{g.className="dialog-overlay active";for(e=0;e<v;e++)y[e].style.zIndex=m-(v+e),c(y[e],!0);for(e=0;e<16;e++)l(y[v]);y[v].className=y[v].className.replace(/ active/g,"")+" active",y[v].style.zIndex=m+1,c(y[v],!1);for(var e=v+1;e<y.length;e++)y[e].className=y[e].className.replace(/ active/g,""),c(y[e],!0);o(y[v])}}function s(t,n){var o=document.createElement("div");o.className="dialog";for(var l=0;document.getElementById("dialog-quick"+l);)l++;o.id="dialog-quick"+l;var i=document.createElement("div");i.style.textAlign="center",i.innerHTML=t,o.appendChild(i);var c=document.createElement("div");if(c.className="buttons",n){(s=document.createElement("button")).className="colored accept",s.innerHTML=f[1],e(s,"click",n);var d=document.createElement("button");d.innerHTML=f[0],e(d,"click",a),c.appendChild(s),c.appendChild(d)}else{var s=document.createElement("button");s.className="colored accept",s.innerHTML=f[1],e(s,"click",a),c.appendChild(s)}o.appendChild(c),document.body.appendChild(o);var n=function(){MarcDialogs.open(o)};h?h(n):window.setTimeout(n,1)}var r=/MSIE 8/.test(navigator.userAgent),u="function"==typeof history.pushState,m=9e3,f=["Cancel","Accept"];(navigator.language||navigator.userLanguage).startsWith("es")&&(f=["Cancelar","Aceptar"]);var g=document.createElement("div");g.className="dialog-overlay",g.style.position="fixed",g.style.top="0",g.style.left="0",g.style.width="100%",g.style.height="100%",g.style.zIndex=m,e(g,"click",a),e(window,"load",function(){document.body.appendChild(g)});var p=!1,v=-1,y=[],h=window.mozRequestAnimationFrame||window.requestAnimationFrame;return e(window,"resize",function(){for(var e=0;e<y.length;e++)l(y[e]),l(y[e])}),u&&e(window,"popstate",function(e){if(p)if(e.state&&"number"==typeof e.state.marcDialog&&e.state.sessionId===p)e.state.marcDialog<v?t():n();else for(;v>=0;)t()}),e(document,"keydown",function(e){if(y.length&&v>=0)if(27==e.keyCode)e.preventDefault?e.preventDefault():e.returnValue=!1,a();else if(9==e.keyCode){var t=y[v];t.dialogElements[t.dialogElements.length-1]===document.activeElement&&(e.preventDefault?e.preventDefault():e.returnValue=!1,o(t))}}),{open:function(e){var t="string"==typeof e?document.getElementById("dialog-"+e.replace(/^#/,"").replace(/^dialog-/,"")):e;if(t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.zIndex=parseInt(g.style.zIndex)+1,!t.dialogElements){t.dialogElements=t.querySelectorAll("input,textarea,select,button");for(var n=0;n<t.dialogElements.length;n++)t.dialogElements[n].tabIndex||(t.dialogElements[n].tabIndex=0)}y[++v]=t,d(),p||(p=(new Date).getTime()),u&&history.pushState({marcDialog:v,sessionId:p},null,null)},replace:function(){},close:a,closeAll:function(){v=-1,d()},alert:function(e){s(e)},confirm:function(e,t){s(e,t)}}}();